# Steam Gift Bot

Бот для автоматической отправки подарков в Steam. Позволяет автоматизировать процесс отправки подарков другим пользователям через API.

## Возможности

- Автоматическое добавление пользователей в друзья по ссылке на профиль
- Отправка подарков через API с указанием конкретной игры
- REST API для управления ботом
- Логирование всех операций

## Требования

- Node.js (версия 12 или выше)
- Аккаунт Steam с возможностью отправки подарков
- Разрешенные покупки в Steam (аккаунт должен быть без ограничений)

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/GRAF231/steam-gift/
   cd steam-gift-bot
   ```

2. Установите зависимости:
   ```bash
   npm install
   ```

3. Создайте файл `.env` на основе `.env.example`:
   ```bash
   cp .env.example .env
   ```

4. Отредактируйте файл `.env`, добавив свои данные:
   ```
   # Steam аккаунт (бот)
   STEAM_USERNAME=your_bot_username
   STEAM_PASSWORD=your_bot_password
   STEAM_SHARED_SECRET=your_shared_secret_for_steam_guard
   STEAM_IDENTITY_SECRET=your_identity_secret

   # API настройки
   API_PORT=3000
   API_SECRET=your_api_secret_key

   # Логирование
   LOG_LEVEL=info

   # Список доступных для подарков игр (ID игр через запятую)
   GIFT_GAME_IDS=730,570,440
   ```

## Настройка Steam Guard

Для работы с автоматической авторизацией через Steam Guard необходимо получить `shared_secret` и `identity_secret`. Вы можете получить их с помощью декодирования файла Steam Desktop Authenticator или используя инструменты типа [SteamAuth](https://github.com/geel9/SteamAuth).

## Запуск

1. Запустите бота:
   ```bash
   npm start
   ```

2. Для разработки (с автоматической перезагрузкой при изменениях):
   ```bash
   npm run dev
   ```

## API Документация

### Аутентификация

Все API запросы требуют API ключ, который должен быть передан в заголовке `X-API-Key`.

Пример:
```
X-API-Key: your_api_secret_key
```

### Эндпоинты

#### Получение статуса бота

```
GET /api/status
```

**Ответ:**
```json
{
  "success": true,
  "status": {
    "loggedIn": true,
    "username": "your_bot_username",
    "availableGames": ["730", "570", "440"]
  }
}
```

#### Отправка запроса в друзья

```
POST /api/friend-request
```

**Тело запроса:**
```json
{
  "profileUrl": "https://steamcommunity.com/id/username"
}
```

**Ответ:**
```json
{
  "success": true,
  "message": "Запрос в друзья отправлен пользователю 76561198XXXXXXXXX",
  "steamID": "76561198XXXXXXXXX"
}
```

#### Перезапуск бота

```
POST /api/restart
```

**Ответ:**
```json
{
  "success": true,
  "message": "Бот перезапущен"
}
```

#### Получение списка доступных игр

```
GET /api/games
```

**Ответ:**
```json
{
  "success": true,
  "games": ["730", "570", "440"]
}
```

#### Отправка подарка

```
POST /api/send-gift
```

**Тело запроса:**
```json
{
  "steamID": "76561198XXXXXXXXX",
  "gameId": "730"
}
```

**Ответ:**
```json
{
  "success": true,
  "message": "Подарок (игра ID: 730) успешно отправлен пользователю 76561198XXXXXXXXX"
}
```

## Процесс работы

1. Клиент отправляет API запрос с URL профиля Steam пользователя
2. Бот отправляет запрос в друзья пользователю
3. После принятия запроса в друзья, бот автоматически отправляет приветственное сообщение пользователю
4. Клиент отправляет API запрос для отправки подарка пользователю с указанием ID игры
5. Бот отправляет выбранную игру в подарок указанному пользователю

## Логи

Логи сохраняются в директорию `logs/`:
- `combined.log` - все логи
- `error.log` - только ошибки

## Безопасность

- Храните файл `.env` в безопасном месте и не включайте его в систему контроля версий
- Используйте сложный API ключ
- Рекомендуется использовать для бота отдельный аккаунт Steam
- Настройте брандмауэр для ограничения доступа к API серверу

## Ограничения

- Аккаунт бота должен иметь историю покупок и не иметь ограничений на отправку подарков
- Требуется двухфакторная аутентификация (Steam Guard)

## Примечания

- Учтите, что при массовом создании запросов в друзья аккаунт может быть помечен как спам, поэтому рекомендуется ограничить количество запросов в единицу времени

## Лицензия

MIT
